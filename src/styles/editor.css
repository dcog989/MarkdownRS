/* CodeMirror Editor Styling */

/* Prevent line numbers and gutters from being selectable */
.cm-gutters,
.cm-lineNumbers,
.cm-gutter,
.cm-gutterElement {
    user-select: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
}

/* Layout */
.cm-editor .cm-gutters {
    background-color: var(--color-bg-gutter) !important;
    border-right: 1px solid var(--color-border-main) !important;
}

.cm-editor .cm-lineNumbers {
    min-width: 5ch !important;
}

.cm-editor .cm-gutterElement {
    display: flex !important;
    align-items: center;
    justify-content: flex-end;
    padding: 0 8px !important;
    color: var(--color-fg-xmuted) !important;
}

.cm-editor .cm-activeLineGutter {
    background-color: var(--color-bg-panel) !important;
    color: var(--color-fg-default) !important;
    font-weight: bold;
}

.cm-editor .cm-activeLine {
    background-color: var(--color-bg-active-line) !important;
}

.cm-editor.cm-focused .cm-selectionBackground,
.cm-editor .cm-selectionBackground,
.cm-editor .cm-content ::selection {
    background-color: var(--color-selection-bg) !important;
}

/* Syntax Highlighting - Structure & Variables */
.cm-h1,
.cm-h2,
.cm-h3,
.cm-h4,
.cm-h5,
.cm-h6 {
    color: var(--syntax-heading);
    font-weight: bold;
}
.cm-h1 {
    font-size: 1.3em;
}
.cm-h2 {
    font-size: 1.2em;
}
.cm-h3 {
    font-size: 1.1em;
}

.cm-keyword {
    color: var(--syntax-keyword);
}
.cm-atom,
.cm-number {
    color: var(--syntax-atom);
}
.cm-string {
    color: var(--syntax-string);
}
.cm-comment {
    color: var(--syntax-comment);
    font-style: italic;
}
.cm-emphasis {
    font-style: italic;
}
.cm-strong {
    font-weight: bold;
}

/* Interactive Elements */
.cm-link {
    color: var(--color-accent-link);
    text-decoration: underline;
}

.cm-url {
    color: var(--color-accent-url);
    text-decoration: underline;
}
.cm-url:hover {
    color: var(--color-accent-url-hover);
}

.cm-file-path {
    color: var(--color-accent-filepath);
    text-decoration: underline;
}
.cm-file-path:hover {
    color: var(--color-accent-filepath-hover);
}

/* Modifier Keys */
.cm-editor.cm-modifier-down .cm-url,
.cm-editor.cm-modifier-down .cm-link,
.cm-editor.cm-modifier-down .cm-file-path,
.cm-editor.cm-modifier-down .cm-formatting-link-string {
    cursor: pointer !important;
}

.cm-editor.cm-modifier-down .cm-url:hover,
.cm-editor.cm-modifier-down .cm-link:hover,
.cm-editor.cm-modifier-down .cm-file-path:hover {
    background-color: oklch(from var(--color-accent-link) l c h / 0.1);
}

/* Markdown Elements */
.cm-highlight {
    background-color: var(--color-bg-highlight);
    color: inherit;
}

.cm-strikethrough {
    text-decoration: line-through;
    text-decoration-color: var(--color-fg-muted);
}

.cm-code {
    background-color: var(--color-bg-code);
    color: var(--color-fg-code);
    border-radius: 0.25rem;
    font-variant-ligatures: none;
    box-decoration-break: clone;
    -webkit-box-decoration-break: clone;
}

.cm-formatting.cm-formatting-code,
.cm-formatting-code-marker,
.cm-meta.cm-code {
    background-color: var(--color-bg-code) !important;
    color: var(--color-fg-code) !important;
    border-radius: 0.25rem;
}

.cm-codeMark {
    background-color: transparent !important;
    color: var(--color-fg-default) !important;
    padding: 0 !important;
    border-radius: 0 !important;
    font-family: inherit !important;
}

.cm-blockquote {
    color: var(--color-fg-muted);
    font-style: italic;
}

.cm-blockquote-border {
    border-left: 0.25rem solid var(--color-border-quote);
    padding-left: 0.375rem;
    border-radius: 0.125rem 0 0 0.125rem;
}

.cm-blockquote-bg {
    background-color: var(--color-bg-quote);
    box-decoration-break: clone;
    -webkit-box-decoration-break: clone;
    padding-top: 0.0625rem;
    padding-bottom: 0.0625rem;
}

.cm-hr {
    color: var(--color-hr-dashes);
    font-weight: 900;
    display: block;
    text-align: center;
    opacity: 1;
    position: relative;
    padding: 0.12em 0;
}

.cm-hr::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    top: 50%;
    height: 2px;
    background-color: var(--color-border-light);
    opacity: 0.6;
    z-index: -1;
}

.cm-bullet {
    color: var(--color-accent-secondary);
    font-weight: 900;
    font-size: 1.1em;
}
